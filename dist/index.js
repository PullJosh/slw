!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(e,r,a){"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?module.exports=a():r[e]=a()}("Please",this,function(){"use strict";function e(){function e(e,r,a){var o=Math.random;return a instanceof l&&(o=a.random),Math.floor(o()*(r-e+1))+e}function r(e,r,a){var o=Math.random;return a instanceof l&&(o=a.random),o()*(r-e)+e}function a(e,r,a){return Math.max(r,Math.min(e,a))}function o(e,r){var a;switch(e){case"hex":for(a=0;a<r.length;a++)r[a]=F.HSV_to_HEX(r[a]);break;case"rgb":for(a=0;a<r.length;a++)r[a]=F.HSV_to_RGB(r[a]);break;case"rgb-string":for(a=0;a<r.length;a++){var o=F.HSV_to_RGB(r[a]);r[a]="rgb("+o.r+","+o.g+","+o.b+")"}break;case"hsv":break;default:console.error("Format not recognized.")}return r}function n(e){var r=F.HSV_to_RGB(e),a=(299*r.r+587*r.g+114*r.b)/1e3;return a>=128?"dark":"light"}function t(e){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);return r}function l(e){function r(){o=(o+1)%256,n=(n+a[o])%256;var e=a[o];return a[o]=a[n],a[n]=e,a[(a[o]+a[n])%256]}for(var a=[],o=0,n=0,t=0;256>t;t++)a[t]=t;for(var l=0,F=0;256>l;l++){F=(F+a[l]+e.charCodeAt(l%e.length))%256;var s=a[l];a[l]=a[F],a[F]=s}this.random=function(){for(var e=0,a=0,o=1;8>e;e++)a+=r()*o,o*=256;return a/0x10000000000000000}}var F={},s={aliceblue:"F0F8FF",antiquewhite:"FAEBD7",aqua:"00FFFF",aquamarine:"7FFFD4",azure:"F0FFFF",beige:"F5F5DC",bisque:"FFE4C4",black:"000000",blanchedalmond:"FFEBCD",blue:"0000FF",blueviolet:"8A2BE2",brown:"A52A2A",burlywood:"DEB887",cadetblue:"5F9EA0",chartreuse:"7FFF00",chocolate:"D2691E",coral:"FF7F50",cornflowerblue:"6495ED",cornsilk:"FFF8DC",crimson:"DC143C",cyan:"00FFFF",darkblue:"00008B",darkcyan:"008B8B",darkgoldenrod:"B8860B",darkgray:"A9A9A9",darkgrey:"A9A9A9",darkgreen:"006400",darkkhaki:"BDB76B",darkmagenta:"8B008B",darkolivegreen:"556B2F",darkorange:"FF8C00",darkorchid:"9932CC",darkred:"8B0000",darksalmon:"E9967A",darkseagreen:"8FBC8F",darkslateblue:"483D8B",darkslategray:"2F4F4F",darkslategrey:"2F4F4F",darkturquoise:"00CED1",darkviolet:"9400D3",deeppink:"FF1493",deepskyblue:"00BFFF",dimgray:"696969",dimgrey:"696969",dodgerblue:"1E90FF",firebrick:"B22222",floralwhite:"FFFAF0",forestgreen:"228B22",fuchsia:"FF00FF",gainsboro:"DCDCDC",ghostwhite:"F8F8FF",gold:"FFD700",goldenrod:"DAA520",gray:"808080",grey:"808080",green:"008000",greenyellow:"ADFF2F",honeydew:"F0FFF0",hotpink:"FF69B4",indianred:"CD5C5C",indigo:"4B0082",ivory:"FFFFF0",khaki:"F0E68C",lavender:"E6E6FA",lavenderblush:"FFF0F5",lawngreen:"7CFC00",lemonchiffon:"FFFACD",lightblue:"ADD8E6",lightcoral:"F08080",lightcyan:"E0FFFF",lightgoldenrodyellow:"FAFAD2",lightgray:"D3D3D3",lightgrey:"D3D3D3",lightgreen:"90EE90",lightpink:"FFB6C1",lightsalmon:"FFA07A",lightseagreen:"20B2AA",lightskyblue:"87CEFA",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"B0C4DE",lightyellow:"FFFFE0",lime:"00FF00",limegreen:"32CD32",linen:"FAF0E6",magenta:"FF00FF",maroon:"800000",mediumaquamarine:"66CDAA",mediumblue:"0000CD",mediumorchid:"BA55D3",mediumpurple:"9370D8",mediumseagreen:"3CB371",mediumslateblue:"7B68EE",mediumspringgreen:"00FA9A",mediumturquoise:"48D1CC",mediumvioletred:"C71585",midnightblue:"191970",mintcream:"F5FFFA",mistyrose:"FFE4E1",moccasin:"FFE4B5",navajowhite:"FFDEAD",navy:"000080",oldlace:"FDF5E6",olive:"808000",olivedrab:"6B8E23",orange:"FFA500",orangered:"FF4500",orchid:"DA70D6",palegoldenrod:"EEE8AA",palegreen:"98FB98",paleturquoise:"AFEEEE",palevioletred:"D87093",papayawhip:"FFEFD5",peachpuff:"FFDAB9",peru:"CD853F",pink:"FFC0CB",plum:"DDA0DD",powderblue:"B0E0E6",purple:"800080",rebeccapurple:"663399",red:"FF0000",rosybrown:"BC8F8F",royalblue:"4169E1",saddlebrown:"8B4513",salmon:"FA8072",sandybrown:"F4A460",seagreen:"2E8B57",seashell:"FFF5EE",sienna:"A0522D",silver:"C0C0C0",skyblue:"87CEEB",slateblue:"6A5ACD",slategray:"708090",slategrey:"708090",snow:"FFFAFA",springgreen:"00FF7F",steelblue:"4682B4",tan:"D2B48C",teal:"008080",thistle:"D8BFD8",tomato:"FF6347",turquoise:"40E0D0",violet:"EE82EE",wheat:"F5DEB3",white:"FFFFFF",whitesmoke:"F5F5F5",yellow:"FFFF00",yellowgreen:"9ACD32"},i=.618033988749895,u={hue:null,saturation:null,value:null,base_color:"",greyscale:!1,grayscale:!1,golden:!0,full_random:!1,colors_returned:1,format:"hex",seed:null},c={scheme_type:"analogous",format:"hex"},h={golden:!1,format:"hex"};return F.NAME_to_HEX=function(e){return e=e.toLowerCase(),e in s?s[e]:void console.error("Color name not recognized.")},F.NAME_to_RGB=function(e){return F.HEX_to_RGB(F.NAME_to_HEX(e))},F.NAME_to_HSV=function(e){return F.HEX_to_HSV(F.NAME_to_HEX(e))},F.HEX_to_RGB=function(e){var r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(r,function(e,r,a,o){return r+r+a+a+o+o});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null},F.RGB_to_HEX=function(e){return"#"+((1<<24)+(e.r<<16)+(e.g<<8)+e.b).toString(16).slice(1)},F.HSV_to_RGB=function(e){var r,a,o,n,t,l,F,s,i=e.h,u=e.s,c=e.v;if(0===u)return{r:c,g:c,b:c};switch(i/=60,n=Math.floor(i),t=i-n,l=c*(1-u),F=c*(1-u*t),s=c*(1-u*(1-t)),n){case 0:r=c,a=s,o=l;break;case 1:r=F,a=c,o=l;break;case 2:r=l,a=c,o=s;break;case 3:r=l,a=F,o=c;break;case 4:r=s,a=l,o=c;break;case 5:r=c,a=l,o=F}return{r:Math.floor(255*r),g:Math.floor(255*a),b:Math.floor(255*o)}},F.RGB_to_HSV=function(e){var r=e.r/255,a=e.g/255,o=e.b/255,n=0,t=0,l=0,F=Math.min(r,Math.min(a,o)),s=Math.max(r,Math.max(a,o));if(F===s)return l=F,{h:0,s:0,v:l};var i=r===F?a-o:o===F?r-a:o-r,u=r===F?3:o===F?1:5;return n=60*(u-i/(s-F)),t=(s-F)/s,l=s,{h:n,s:t,v:l}},F.HSV_to_HEX=function(e){return F.RGB_to_HEX(F.HSV_to_RGB(e))},F.HEX_to_HSV=function(e){return F.RGB_to_HSV(F.HEX_to_RGB(e))},F.make_scheme=function(e,r){function n(e){return{h:e.h,s:e.s,v:e.v}}var l,F,s,i,u,h=t(c);if(null!==r)for(var d in r)r.hasOwnProperty(d)&&(h[d]=r[d]);var g=[e];switch(h.scheme_type.toLowerCase()){case"monochromatic":case"mono":for(u=1;2>=u;u++)l=n(e),s=l.s+.1*u,s=a(s,0,1),i=l.v+.1*u,i=a(i,0,1),l.s=s,l.v=i,g.push(l);for(u=1;2>=u;u++)l=n(e),s=l.s-.1*u,s=a(s,0,1),i=l.v-.1*u,i=a(i,0,1),l.s=s,l.v=i,g.push(l);break;case"complementary":case"complement":case"comp":l=n(e),l.h=(l.h+180)%360,g.push(l);break;case"split-complementary":case"split-complement":case"split":l=n(e),l.h=(l.h+165)%360,g.push(l),l=n(e),l.h=Math.abs((l.h-165)%360),g.push(l);break;case"double-complementary":case"double-complement":case"double":l=n(e),l.h=(l.h+180)%360,g.push(l),l.h=(l.h+30)%360,F=n(l),g.push(l),l.h=(l.h+180)%360,g.push(F);break;case"analogous":case"ana":for(u=1;5>=u;u++)l=n(e),l.h=(l.h+20*u)%360,g.push(l);break;case"triadic":case"triad":case"tri":for(u=1;3>u;u++)l=n(e),l.h=(l.h+120*u)%360,g.push(l);break;default:console.error("Color scheme not recognized.")}return o(h.format.toLowerCase(),g),g},F.make_color=function(n){var s=[],c=t(u),h=null;if(null!==n)for(var d in n)n.hasOwnProperty(d)&&(c[d]=n[d]);var g=null;"string"==typeof c.seed&&(g=new l(c.seed)),c.base_color.length>0&&(h=c.base_color.match(/^#?([0-9a-f]{3})([0-9a-f]{3})?$/i)?F.HEX_to_HSV(c.base_color):F.NAME_to_HSV(c.base_color));for(var m=0;m<c.colors_returned;m++){var f,E,b,p=e(0,360,g);null!==h?(f=a(e(h.h-5,h.h+5,g),0,360),E=0===h.s?0:r(.4,.85,g),b=r(.4,.85,g),s.push({h:f,s:E,v:b})):(f=c.greyscale===!0||c.grayscale===!0?0:c.golden===!0?(p+p/i)%360:null===c.hue||c.full_random===!0?p:a(c.hue,0,360),E=c.greyscale===!0||c.grayscale===!0?0:c.full_random===!0?r(0,1,g):null===c.saturation?.4:a(c.saturation,0,1),b=c.full_random===!0?r(0,1,g):c.greyscale===!0||c.grayscale===!0?r(.15,.75,g):null===c.value?.75:a(c.value,0,1),s.push({h:f,s:E,v:b}))}return o(c.format.toLowerCase(),s),s},F.make_contrast=function(e,r){var l=t(h);if(null!==r)for(var s in r)r.hasOwnProperty(s)&&(l[s]=r[s]);var u,c,d=n(e);if(l.golden===!0)c=e.h*(1+i)%360;else{var g=F.make_scheme(e,{scheme_type:"complementary",format:"hsv"})[1];c=a(g.h-30,0,360)}var m;return"dark"===d?m=a(e.v-.25,0,1):"light"===d&&(m=a(e.v+.25,0,1)),u=[{h:c,s:e.s,v:m}],o(l.format.toLowerCase(),u),u[0]},F}return e()})},{}],2:[function(require,module,exports){"use strict";function trimLines(value){return String(value).replace(WHITE_SPACE_COLLAPSABLE_LINE,LINE)}var WHITE_SPACE_COLLAPSABLE_LINE=/[ \t]*\n+[ \t]*/g,LINE="\n";module.exports=trimLines},{}],3:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_SLW=require("./SLW"),_Tile=(_interopRequireDefault(_SLW),require("./Tile")),_Tile2=_interopRequireDefault(_Tile),_util=require("./util"),DEBUG=!0,Entity=function(){function Entity(game){_classCallCheck(this,Entity),this.game=game,this.x=0,this.y=0,this.xv=0,this.yv=0,this.w=16,this.h=16;var c=require("pleasejs").make_color({format:"rgb"})[0];this.color="rgba("+c.r+", "+c.g+", "+c.b+", 0.75)"}return _createClass(Entity,[{key:"top",get:function(){return Math.floor(this.y)}},{key:"bottom",get:function(){return Math.floor(this.y+this.h)}},{key:"left",get:function(){return Math.floor(this.x)}},{key:"right",get:function(){return Math.floor(this.x+this.w)}}]),_createClass(Entity,[{key:"update",value:function(game){var v=0,xv=Math.floor(this.xv);v=(0,_util.sign)(xv);for(var i=0;i<Math.abs(xv);i++)this.x+=v,this.collides&&(this.x-=v,this.xv=0);var yv=Math.floor(this.yv);v=(0,_util.sign)(yv);for(var _i=0;_i<Math.abs(yv);_i++)if(this.y+=v,this.collides){this.y-=v,this.yv=0;var tileAboveX=Math.round(this.left/_Tile2.default.size),tileAboveY=this.top/_Tile2.default.size-1,tileAbove=this.game.level.tileAt([tileAboveX,tileAboveY]);tileAbove.on.airPunched&&tileAbove.on.airPunched.apply(tileAbove)}}},{key:"draw",value:function(game){var ctx=game.canvas.getContext("2d");ctx instanceof CanvasRenderingContext2D&&DEBUG&&(ctx.fillStyle=this.color,ctx.fillRect(this.left,this.top,this.w+1,this.h+1))}},{key:"collides",get:function(){var tileLeft=Math.floor(this.left/_Tile2.default.size),tileRight=Math.floor(this.right/_Tile2.default.size),tileTop=Math.floor(this.top/_Tile2.default.size),tileBottom=Math.floor(this.bottom/_Tile2.default.size),levelWidth=this.game.level.w,levelHeight=this.game.level.h;tileLeft<0&&(tileLeft=0),tileRight>levelWidth&&(tileRight=levelWidth),tileTop<0&&(tileTop=0),tileBottom>levelHeight&&(tileBottom=levelHeight);for(var collision=!1,x=tileLeft;x<=tileRight;x++)for(var y=tileTop;y<=tileBottom;y++){var tile=this.game.level.tileAt([x,y]);tile.solid&&(collision=!0)}return collision}},{key:"grounded",get:function(){return this.game.level.tileAt([Math.floor(this.x/16),this.bottom/16+.1]).solid||this.game.level.tileAt([Math.ceil(this.x/16),this.bottom/16+.1]).solid}}]),Entity}();exports.default=Entity;exports.Player=function(_Entity){function Player(game){var x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,Player);var _this=_possibleConstructorReturn(this,(Player.__proto__||Object.getPrototypeOf(Player)).call(this,game));return _this.x=x,_this.y=y,_this.w=16,_this.h=24,_this.jumpSound=new window.Audio("sound/smw_jump.wav"),_this}return _inherits(Player,_Entity),_createClass(Player,[{key:"update",value:function(game){game.keys[39]&&(this.xv+=1),game.keys[37]&&(this.xv-=1),game.keys[39]||game.keys[37]||(this.xv+=(0,_util.sign)(this.xv)*-.5),this.grounded&&game.keys[32]&&(this.yv=-4,this.jumpSound.play()),this.xv=Math.min(this.xv,3),this.xv=Math.max(this.xv,-3),this.yv=Math.min(this.yv,4),this.yv+=.25,_get(Player.prototype.__proto__||Object.getPrototypeOf(Player.prototype),"update",this).call(this,game)}}]),Player}(Entity)},{"./SLW":5,"./Tile":6,"./util":8,pleasejs:1}],4:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_SLW=require("./SLW"),_Tile=(_interopRequireDefault(_SLW),require("./Tile")),_Tile2=_interopRequireDefault(_Tile),Level=function(){function Level(game){var id=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1],leveldata=arguments[2],tileset=arguments[3];_classCallCheck(this,Level),this.id=id,this.game=game,this.tileset=tileset,this.tilemap=[];for(var rows=leveldata.split("\n"),y=0;y<rows.length;y++){this.tilemap[y]=[];for(var row=rows[y],x=0;x<row.length;x++){var tile=_Tile2.default.get(row[x]);tile.x=x,tile.y=y,tile.game=game,tile.exists=!0,this.tilemap[y].push(tile)}}this.w=rows.length,this.h=rows[0].length}return _createClass(Level,[{key:"update",value:function(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.tilemap[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var row=_step.value,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=row[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var tile=_step2.value;tile.on.update&&tile.on.update.apply(tile)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"draw",value:function(){var ctx=this.game.canvas.getContext("2d");if(ctx instanceof CanvasRenderingContext2D)for(var viewStartX=0,viewStartY=0,viewEndX=16,viewEndY=16,y=viewStartY;y<viewEndY;y++)for(var x=viewStartX;x<viewEndX;x++){var tile=this.tileAt([x,y]),_getAbsolutePosition=this.getAbsolutePosition([x,y]),_getAbsolutePosition2=_slicedToArray(_getAbsolutePosition,2),rendX=_getAbsolutePosition2[0],rendY=_getAbsolutePosition2[1],_tile$position=_slicedToArray(tile.position,2),tileX=_tile$position[0],tileY=_tile$position[1];ctx.drawImage(this.tileset,tileX*_Tile2.default.size,tileY*_Tile2.default.size,_Tile2.default.size,_Tile2.default.size,rendX,rendY,_Tile2.default.size,_Tile2.default.size)}}},{key:"tileAt",value:function(_ref){var _ref2=_slicedToArray(_ref,2),tileX=_ref2[0],tileY=_ref2[1];tileX=Math.floor(tileX),tileY=Math.floor(tileY);try{var r=this.tilemap[tileY][tileX];if("undefined"==typeof r)throw"nope";return r}catch(e){return console.warn("Level.at(["+tileX+", "+tileY+"]) failed to retrieve Tile"),_Tile2.default.get(" ")}}},{key:"replaceTile",value:function(_ref3,newTile){var _ref4=_slicedToArray(_ref3,2),tileX=_ref4[0],tileY=_ref4[1];newTile.x=tileX,newTile.y=tileY,newTile.game=this.game,newTile.exists=!0;var oldTile=this.tileAt([tileX,tileY]);return oldTile.exists=!1,oldTile.on.create&&oldTile.on.create.apply(oldTile),this.tilemap[tileY][tileX]=newTile,newTile.on.create&&newTile.on.create.apply(oldTile),newTile}},{key:"getAbsolutePosition",value:function(_ref5){var _ref6=_slicedToArray(_ref5,2),tileX=_ref6[0],tileY=_ref6[1];return[Math.floor(tileX*_Tile2.default.size),Math.floor(tileY*_Tile2.default.size)]}}]),Level}();exports.default=Level},{"./SLW":5,"./Tile":6}],5:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Tile=require("./Tile"),_Level=(_interopRequireDefault(_Tile),require("./Level")),_Level2=_interopRequireDefault(_Level),_Entity=require("./Entity"),trimLines=require("trim-lines"),SLW=function(){function SLW(leveldata,tileset){var _this=this;_classCallCheck(this,SLW),this.keys={},this.canvas=document.createElement("canvas"),this.canvas.width=256,this.canvas.height=256,this.canvas.addEventListener("keydown",function(evt){_this.keys[evt.keyCode]=!0}),this.canvas.addEventListener("keyup",function(evt){_this.keys[evt.keyCode]=!1}),this.canvas.setAttribute("tabindex","1"),this.player=new _Entity.Player(this,16,16),this.camera=[0,0],this.level=new _Level2.default(this,[1,1],trimLines(leveldata),tileset);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.level.tilemap[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var row=_step.value,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=row[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var tile=_step2.value;tile.on.create&&tile.on.create.apply(tile)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}return _createClass(SLW,[{key:"canvasClear",value:function(){var ctx=this.canvas.getContext("2d");ctx instanceof CanvasRenderingContext2D&&(ctx.fillStyle="#f8e0b2",ctx.fillRect(0,0,this.canvas.width,this.canvas.height))}}]),SLW}();exports.default=SLW},{"./Entity":3,"./Level":4,"./Tile":6,"trim-lines":2}],6:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.tilemap=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_SLW=require("./SLW"),Tile=(_interopRequireDefault(_SLW),function(){function Tile(props){_classCallCheck(this,Tile),this.name=props.name||"Unknown",this.position=props.position,this.solid=props.solid||!1,this.on=props.on||{},this.exists=!1}return _createClass(Tile,null,[{key:"get",value:function(str){var tile=tilemap.get(str);if(tile)return tile;throw new RangeError("Tile "+str+" not found.")}}]),Tile}());exports.default=Tile;var tilemap=exports.tilemap=new Map([["=",new Tile({name:"Ground",position:[0,0],solid:!0,on:{create:function(){var topTile=this.game.level.tileAt([this.x,this.y-1]),bottomTile=this.game.level.tileAt([this.x,this.y+1]),leftTile=this.game.level.tileAt([this.x-1,this.y]),rightTile=this.game.level.tileAt([this.x+1,this.y]),top=topTile.name===this.name,bottom=bottomTile===this.name,left=leftTile===this.name,right=rightTile===this.name;top&&left&&right&&bottom&&(this.position=[6,1]),!top&&left&&right&&bottom&&(this.position=[5,1]),!top&&!left&&right&&bottom&&(this.position=[5,0]),!top&&left&&!right&&bottom&&(this.position=[5,2]),top||left||right||!bottom||(this.position=[3,5]),console.log(topTile,leftTile,rightTile,bottomTile,this.position)}}})],["?",new Tile({name:"? Block",position:[0,4],solid:!0,on:{create:function(){this.i=0},update:function(){this.i+=.1,this.i>=4&&(this.i=0),this.position[0]=Math.max(Math.floor(this.i),0)},airPunched:function(){new window.Audio("sound/smw_shell_ricochet.wav").play(),this.game.level.replaceTile([this.x,this.y],Tile.get("x"))}}})],["-",new Tile({name:"Air",position:[2,0]})],["x",new Tile({name:"? Block (Used)",position:[4,4],solid:!0})],[" ",new Tile({name:"Void",position:[0,1]})],["0",new Tile({name:"Coin",position:[0,3],on:{create:function(){this.i=0},update:function(){this.i+=.025,this.i>=4&&(this.i=0),this.position[0]=Math.max(Math.floor(this.i),0)}}})]]);Tile.size=16},{"./SLW":5}],7:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _SLW=require("./SLW"),_SLW2=_interopRequireDefault(_SLW);window.addEventListener("load",function(e){var tileset=new Image;tileset.onload=function(){var game=new _SLW2.default("--------------------\n --------------------\n --------------------\n --------------------\n ----------------===-\n -----00-------------\n ----0---------------\n ---0----===---------\n --------------------\n ==------------------\n --------------------\n ----------=?=-------\n ------=-------------\n -----===------------\n ----=====----===----\n =================---\n ====================",tileset);window.game=game,document.body.appendChild(game.canvas),game.tileset=tileset,game.canvas.focus();!function render(){requestAnimationFrame(render),document.hasFocus()&&(game.canvasClear(),game.level.update(),game.level.draw(),game.player.update(game),game.player.draw(game))}()},tileset.src="tileset.png"})},{"./SLW":5}],8:[function(require,module,exports){"use strict";function sign(n){return n>0?1:n<0?-1:0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.sign=sign},{}]},{},[7]);
//# sourceMappingURL=index.js.map
